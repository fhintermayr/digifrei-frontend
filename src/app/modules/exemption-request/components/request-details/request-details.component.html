<ng-container *ngIf="exemptionRequest$ | async as exemptionRequest">

  <app-page-heading>Dienstbefreiung von {{ exemptionRequest.applicant.firstName }} {{ exemptionRequest.applicant.lastName }}</app-page-heading>

  <app-card>
    <app-card-header>
      <div class="-ml-4 -mt-4 flex flex-wrap items-center justify-between sm:flex-nowrap">

          <div class="ml-4 mt-4">
            <h3 class="text-base font-semibold leading-6 text-gray-900">Antragsdetails</h3>
          </div>

          <div class="ml-4 mt-4 flex-shrink-0">

            <app-shared-button *ngIf="!isCurrentlyEditing else submitAndCancelButtons" (click)="toggleEditingState()">Bearbeiten</app-shared-button>

            <ng-template #submitAndCancelButtons>
              <app-shared-button class="mr-2">Speichern</app-shared-button>
              <app-shared-button [buttonDesign]="'secondary'" (click)="toggleEditingState()">Abbrechen</app-shared-button>
            </ng-template>

          </div>
      </div>
    </app-card-header>

    <app-card-body>

      <app-request-details-editing-form *ngIf="isCurrentlyEditing else descriptionList" [exemptionRequest]="exemptionRequest"></app-request-details-editing-form>

      <ng-template #descriptionList>
        <app-request-details-description-list [exemptionRequest]="exemptionRequest"></app-request-details-description-list>
      </ng-template>

    </app-card-body>
  </app-card>

  <br>

  <ng-container *ngIf="exemptionRequest.requestProcessing else notYetProcessed">
    <app-request-processing-description-list [requestProcessing]="exemptionRequest.requestProcessing"></app-request-processing-description-list>
  </ng-container>

  <ng-template #notYetProcessed>

    <app-alert [alertType]="'info'">Der Antrag wurde bisher noch nicht bearbeitet</app-alert>
    <br>

    <button type="button" class="relative block w-full rounded-lg border-2 border-dashed border-gray-300 p-12 text-center hover:border-gray-400">
      <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6" />
      </svg>
      <span class="mt-2 block text-sm font-semibold text-gray-900">Antrag genehmigen oder ablehnen</span>
    </button>

  </ng-template>

</ng-container>
